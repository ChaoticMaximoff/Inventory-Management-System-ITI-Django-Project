{% extends 'base.html' %} {% block content %}
<title>Orders</title>
<style>
  .action-icons i {
    cursor: pointer;
    margin: 0 5px;
  }

  .btn-view-all {
    border: 1px solid #4339f2;
    color: #4339f2;
    border-radius: 8px;
    font-size: 14px;
  }

  .orders-card {
    border: none;
    border-radius: 12px;
    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
    padding: 15px;
  }
</style>

<h5 class="fw-bold">Recent Orders</h5>
<div class="my-4">
  <div class="card orders-card" style="overflow: auto">
    <div class="d-flex justify-content-between gap-5 align-items-center">
      <div class="input-group w-25">
        <button class="input-group-text">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <input
          type="text"
          class="form-control"
          placeholder="Search"
          aria-label="Search"
          aria-describedby="basic-addon1" />
      </div>
      <div>
        <a href="{% url 'order_create' %}"
          ><button
            class="btn btn-view-all fw-semibold me-2"
            style="background-color: #4339f2; color: white">
            + Add An Order
          </button></a
        >
        <button class="btn btn-view-all me-2">View All</button>
      </div>
    </div>
    <table class="table align-middle mt-3">
      <thead>
        <tr>
          <th><input type="checkbox" /></th>
          <th>Supermarket Name</th>
          <th>Order ID</th>
          <th>Receive Date</th>
          <th>Status</th>
          <th>Created By</th>
          <th>Action</th>
        </tr>
      </thead>
      {% for order in orders %}
      <tbody>
        <tr>
          <td><input type="checkbox" /></td>
          <td>{{ order.supermarket }}</td>
          <td>#{{order.id}}</td>
          <td>{{ order.receive_date }}</td>
          <td>{{ order.status }}</td>
          <td>{{ order.created_by_user }}</td>
          <td class="action-icons">
            <a href="{% url 'order_items' order.id %}"
              ><i class="fas fa-eye text-primary"></i
            ></a>
            <a href="{% url 'order-update' order.id %}"
              ><i class="fas fa-edit text-success"></i
            ></a>
            <button
              type="button"
              class="btn"
              data-bs-toggle="modal"
              data-bs-toggle="modal"
              data-bs-target="#deleteorder-{{order.id}}">
              <i class="fas fa-trash text-danger"></i>
            </button>
            <!-- Confirm Delete Modal -->
            <div
              class="modal fade"
              id="deleteorder-{{order.id}}"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                      Confirm Delete
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    Are you sure you want to delete this order?
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal">
                      Close
                    </button>
                    <form
                      action="{% url 'order-delete' order.id %}"
                      method="post">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-danger">
                        Confirm
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="p-4 text-center">No orders found.</td>
        </tr>
        {% endfor %} {% endblock %}
      </tbody>
    </table>
  </div>
</div>
